!function(){angular.module("ngSecured.loopback",["ngSecured"])}(),function(){function a(){function a(a){angular.extend(c,a)}this.setup=a,this.$get=b}function b(a,b,d,e,f,g,h){function i(){o||(o=n())}function j(b){function d(a){var b;c.tokenAgeJsonPath&&(b=e(c.tokenAgeJsonPath)(a.data),b||h.warn(p+" tokenAge , using the default instead"));var d=e(c.tokenJsonPath)(a.data);if(!d){var g="Token "+p+'"'+c.tokenJsonPath+'"';return h.error(g),f.reject(new Error(g))}return m(d,b),a.data}return a.post(c.loginUrl,b).then(d)}function k(){return!!n()}function l(){var e=n(),f=c.logoutUrl;f&&a.post(f,null,{headers:{Authorization:e}})["catch"](function(a){h.error(a.data)}),o=null,d.remove(b.TOKEN)}function m(a,e){e||(e=c.defaultTokenAge),o=a,d.set(b.TOKEN,a)}function n(){return o?o:d.get(b.TOKEN)}var o,p=g.WRONG_JSON_PATH;i();var q={};return q.login=j,q.isLoggedIn=k,q.logout=l,q.getToken=n,q.setToken=m,q}angular.module("ngSecured.loopback").provider("ngSecured.authAdapter",a);var c={loginUrl:"",logoutUrl:"",tokenJsonPath:"",tokenAgeJsonPath:"",defaultTokenAge:36e5};a.$inject=[],b.$inject=["$http","ngSecured.cacheKeys","localStorageService","$parse","$q","ngSecured.errorMessages","$log"]}(),function(){function a(a,b){function c(c){a.setup(c),b.interceptors.push("ngSecured.tokenInterceptor")}this.setup=c,this.$get=function(){}}angular.module("ngSecured.loopback").provider("ngSecuredLoopback",a),a.$inject=["ngSecured.authAdapterProvider","$httpProvider"]}(),function(){function a(a){function b(b){var c=a.get("ngSecured.authAdapter"),d=c.getToken();return d&&(b.headers.Authorization=d),b}var c={};return c.request=b,c}angular.module("ngSecured.loopback").factory("ngSecured.tokenInterceptor",a),a.$inject=["$injector"]}();